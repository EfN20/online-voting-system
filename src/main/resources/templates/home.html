<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Home Page</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/bootstrap/bootstrap.min.css}">
</head>
<body>

<div th:insert="~{includes/header :: header}"></div>
<div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
    <h1 class="display-4">Home Page</h1>
</div>

<div th:if="${param.success}" class="alert alert-success w-25 mx-auto text-center">
    Your vote has been successfully submitted!
</div>

<div>
    <div class="bd-example container">
        <div class="row  row-cols-1 row-cols-md-2 g-4">
            <div th:each="question : ${questions}" class="col">
                <div class="card">
                    <div class="card-header">
                        Question
                    </div>

                    <div class="card-body">
                        <form th:method="POST" th:action="@{/questions}">
                            <h5 class="card-title" th:text="${question.key.getTitle()}">Question Title</h5>
                            <input type="hidden" name="question" th:value="${question.key.getId()}"/>
                            <p class="card-text">Choose preferred option: </p>
                            <div th:each="option : ${question.key.getOptions()}" class="list-group-item d-flex justify-content-between align-items-center">
                                <label>
                                    <input
                                            type="radio"
                                            name="option"
                                            th:disabled="${question.value}"
                                            th:value="${option.getId()}"
                                            required
                                    />
                                </label>
                                <span th:text="${option.getTitle()}">Option Title</span>
                                <span class="badge bg-primary rounded-pill" th:text="${option.getVoteCount()}">0</span>
                            </div>
                            <button th:disabled="${question.value}" type="submit">Vote</button>
                        </form>
                        <form th:method="GET" th:action="@{/questions/full-statistics}">
                            <input type="hidden" name="question" th:value="${question.key.getId()}"/>
                            <button type="submit">Get full statistics of question</button>
                        </form>
                    </div>

                    <div class="card-footer text-muted" th:text="${question.key.getVoteCount()}"></div>
                </div>
            </div>


        </div>
    </div>
</div>

</body>
</html>